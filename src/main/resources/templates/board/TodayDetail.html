<!DOCTYPE html>
<html lang="UTF-8" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="UTF-8">
    <!-- CSRF -->
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <meta name="_csrf" th:content="${_csrf.token}">

    <title>오늘의 음악</title>
    <!-- jquery cdn -->
    <script
            src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
            crossorigin="anonymous">
    </script>
    <script type="text/javascript" th:src="@{/js/TodayReply.js}"></script>

    <th:block th:replace="inc/header"></th:block>
</head>
<body>
<th:block th:replace="inc/body"></th:block>
<!-- CSRF 토큰 가져옴 -->
<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

<div class="container mt-5">
    <table class="table mt-4">
        <thead class="thead-light">
        <tr>
            <th>번호</th>
            <td th:text="${boardToday.id}"></td>
        </tr>
        <tr>
            <th>제목</th>
            <td th:text="${boardToday.todayTitle}"></td>
        </tr>
        <tr>
            <th>작성자</th>
            <td th:text="${boardToday.userName}"></td>
        </tr>
    <!--    <tr>
            <th>Email</th>
            <td th:text="${boardToday.LoginEmail}"></td>
        </tr>-->
        <tr>
            <th>내용</th>
            <td th:text="${boardToday.todayContent}"></td>
        </tr>
        <tr>
            <th>조회수</th>
            <td th:text="${boardToday.todayHits}"></td>
        </tr>
        <tr>
            <th>등록 날짜</th>
            <td th:text="${boardToday.todayCreatedTime}"></td>
        </tr><tr>
            <th>수정 날짜</th>
            <td th:text="${boardToday.todayUpdatedTime}"></td>
        </tr>
    </table>
    <div>
        <a class="btn btn-primary" th:href="@{/Board/Update/{id}(id=${boardToday.id})}">글 수정</a>
        <a class="btn btn-info" th:href="@{/Board/Delete/{id}(id=${boardToday.id})}">글 삭제</a>
    </div>
    <!-- 댓글 -->
    <div class="form-group mt-5">
        <label for="todayContent"></label>
        <textarea class="form-control" id="todayContent" rows="3" placeholder="내용을 입력해주세요."></textarea>
        <button class="btn btn-primary" type="button" id="submitTodayReply">댓글 등록</button>
        <!--<button type="submit" class="btn btn-primary" onclick="TodayReply()">댓글 등록</button>-->
    </div>

    <!-- 댓글 리스트 -->
    <div class="mt-5">
        <input type="hidden" id="user-id" th:value="${userId}"> <!-- 댓글 작성자 id -->
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>작성자</th>
                    <th>내용</th>
                    <th>작성일시</th>
                </tr>
                </thead>
                <tbody>
                <!-- 댓글 리스트를 for-each로 반복하며 출력 -->
                <tr th:each="reply : ${replyList}">
                    <td th:text="${reply.userName}"></td>
                    <td th:text="${reply.todayContents}"></td>
                    <td th:text="${#temporals.format(reply.ReplyCreatedTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                </tr>
                </tbody>
            </table>
    </div>
</div>
</body>

</html>